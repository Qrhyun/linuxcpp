# cppä¹¦çš„çº¿ç¨‹æ¡†æ¶æ•´ç†
## ä¸€.Linuxçº¿ç¨‹åŒæ­¥å¯¹è±¡   
### 1.pthread_mutexattr_settype/pthread_mutexattr_gettypeè®¾ç½®æˆ–è·å–æƒ³è¦çš„å±æ€§ç±»å‹ï¼š
#### PTHREAD_MUTEX_NORMALï¼ˆæ™®é€šé”ï¼‰
     > åœ¨ä¸€ä¸ªçº¿ç¨‹å¯¹ä¸€ä¸ªæ™®é€šé”åŠ é”ä»¥åï¼Œå…¶ä»–çº¿ç¨‹ä¼šé˜»å¡åœ¨ pthread_mutex_lockè°ƒç”¨å¤„ï¼Œç›´åˆ°å¯¹äº’æ–¥ä½“åŠ é”çš„çº¿ç¨‹é‡Šæ”¾äº†é”ã€‚
     > ä¸€ä¸ªçº¿ç¨‹å¦‚æœå¯¹ä¸€ä¸ªå·²ç»åŠ é”çš„æ™®é€šé”å†æ¬¡ä½¿ç”¨äº†pthread_mutex_lockåŠ é”ï¼Œé‚£ä¹ˆç¨‹åºä¼šé˜»å¡åœ¨ç¬¬2æ¬¡è°ƒç”¨pthread_mutex_lockä»£ç å¤„
     > è¿™ç§åœºæ™¯ä¸‹ï¼Œpthread_mutex_trylockå‡½æ•°å¦‚æœæ‹¿ä¸åˆ°é”ï¼Œåˆ™ä¹Ÿä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯ä¼šç«‹å³è¿”å›EBUSYé”™è¯¯ç ã€‚
#### PTHREAD_MUTEX_ERRORCHECKï¼ˆæ£€é”™é”ï¼‰
     > åŒä¸€ä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªäº’æ–¥ä½“å¯¹è±¡å¤šæ¬¡åŠ é”:å¦‚æœä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨äº† pthread_mutex_lock å¯¹å·²ç»åŠ é”çš„äº’æ–¥ä½“å¯¹è±¡å†æ¬¡åŠ é”ï¼Œåˆ™pthread_mutex_lock ä¼šè¿”å› EDEADLKã€‚
     > ä¸€ä¸ªçº¿ç¨‹å¯¹æŸä¸ªäº’æ–¥ä½“åŠ é”ï¼Œå…¶ä»–çº¿ç¨‹å†æ¬¡å¯¹è¯¥äº’æ–¥ä½“åŠ é”:å½“å‰çº¿ç¨‹é‡å¤è°ƒç”¨pthread_mutex_lock ä¼šç›´æ¥è¿”å› EDEADLOCKï¼Œå…¶ä»–çº¿ç¨‹å¦‚æœå¯¹è¿™ä¸ªäº’æ–¥ä½“å†æ¬¡è°ƒç”¨pthread_mutex_lockï¼Œåˆ™ä¼šé˜»å¡åœ¨è¯¥å‡½æ•°çš„è°ƒç”¨å¤„
#### PTHREAD_MUTEX_RECURSIVEï¼ˆå¯é‡å…¥é”ï¼‰
     > è¯¥å±æ€§å…è®¸åŒä¸€ä¸ªçº¿ç¨‹å¯¹å…¶æŒæœ‰çš„äº’æ–¥ä½“é‡å¤åŠ é”,ä¸ºäº†é¿å…å› å¿˜è®°è°ƒç”¨pthread_mutex_unlockå‡ºç°æ­»é”æˆ–è€…åœ¨é€»è¾‘å‡ºå£å¤„æœ‰å¤§é‡è§£é”çš„é‡å¤ä»£ç å‡ºç°ï¼Œå»ºè®®ä½¿ç”¨ RAII æŠ€æœ¯å°†äº’æ–¥ä½“å¯¹è±¡å°è£…èµ·æ¥
### 2.æ¡ä»¶å˜é‡ï¼ˆğŸ˜¢è¿™é‡Œä¸æ‡‚è™šå‡å”¤é†’çš„é€»è¾‘ï¼‰
    > æ¡ä»¶å˜é‡çš„åˆå§‹åŒ–å’Œé”€æ¯
    > è°ƒç”¨ç­‰å¾…
    > å”¤é†’
    ** æ¡ä»¶ä¿¡å·é‡ä¸¢å¤±æ³¨æ„çš„é—®é¢˜ **ï¼šç­‰å¾…çš„çº¿ç¨‹åœ¨äº§ç”Ÿæ¡ä»¶å˜é‡ä¿¡å·çš„çº¿ç¨‹å‘é€æ¡ä»¶ä¿¡å·ä¹‹å‰è°ƒç”¨pthread_cond_wait
## äºŒ. C++11/14/17çº¿ç¨‹åŒæ­¥å¯¹è±¡
### 1.std::mutexç³»åˆ—**å¦‚æœåœ¨ Linuxä¸‹ç¼–è¯‘å’Œè¿è¡Œç¨‹åºï¼Œåˆ™åœ¨ç¼–è¯‘æ—¶éœ€è¦é“¾æ¥pthreadåº“**
    > stdï¼šï¼šmutex.lockæ–¹æ³•å’Œstdï¼šï¼šmutexï¼šï¼šunlockå¯¹åº”stdï¼šï¼šlock_guard
    > å¦‚æœéœ€è¦åŒä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡å¯¹æŸä¸ª mutex è¿›è¡ŒåŠ é”ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨stdï¼šï¼šmutexï¼Œåº”è¯¥ä½¿ç”¨stdï¼šï¼šrecursive_mutex
### 2.std::shared_mutexï¼Œåœ¨æœ‰å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¯»ä¸”å°‘è®¸çº¿ç¨‹å¯¹å…±äº«èµ„æºå†™çš„æƒ…å†µä¸‹ï¼Œstdï¼šï¼šshared_mutexæ¯”stdï¼šï¼šmutexæ•ˆç‡æ›´é«˜ã€‚
    > stdï¼šï¼šshared_mutexæä¾›äº†lock æ–¹æ³•å’Œunlock æ–¹æ³•åˆ†åˆ«ç”¨äºè·å–å†™é”å’Œè§£é™¤å†™é”ï¼Œæä¾›äº†lock_sharedæ–¹æ³•å’Œunlock_sharedæ–¹æ³•åˆ†åˆ«ç”¨äºè·å–è¯»é”å’Œè§£é™¤è¯»é”
    > ä¸stdï¼šï¼šshared_mutexé…åˆä½¿ç”¨çš„ä¸¤ä¸ªå¯¹è±¡â€”â€”stdï¼šï¼šunique_lockå’Œstdï¼šï¼šshared_lock,å‰è€…ç”¨äºåŠ è§£ stdï¼šï¼šshared_mutex çš„å†™é”ï¼Œåè€…ç”¨äºåŠ è§£stdï¼šï¼šshared_mutexçš„è¯»é”
    > stdï¼šï¼šmutex å’Œ stdï¼šï¼šshared_mutex åˆ†åˆ«å¯¹åº” Java JDK ä¸­çš„ ReentrantLock å’ŒReentrantReadWriteLockã€‚
### 3.std::condition_variableï¼ˆæ¡ä»¶å˜é‡ï¼‰




   

